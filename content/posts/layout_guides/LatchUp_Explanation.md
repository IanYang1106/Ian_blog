---
title: "Latch-Up 原理說明"
date: 2025-02-24T15:30:00+08:00
draft: false
categories: ["Layout"]
tags: ["學習筆記", "IC Layout"]
---

# Latch-Up 原理說明

Latch-Up（閂鎖效應）是積體電路（IC）中常見的一種問題，會造成電路內部產生大電流，導致元件燒毀。這個現象主要發生在 CMOS 製程中，因為製程本身會形成一些不必要的電晶體結構，當遇到過壓或靜電等狀況時，這些結構就會形成矽控整流器（SCR）而導致元件損壞。

## 主要重點

### 1. 寄生結構的形成
- CMOS 製程中會形成 p-n-p-n 的疊層結構
- 這個結構會產生兩個寄生雙極性電晶體（BJT）：一個 PNP 跟一個 NPN
- 在正常運作時，這些寄生結構不應該被觸發

### 2. 容易觸發的情況
- **過壓**：電壓超過元件的規格值
- **ESD**：接觸到靜電
- **輻射**：受到離子化輻射影響
- **電源時序不對**：開機或關機時序不正確

### 3. Latch-Up 的發生過程
1. 當有觸發條件時，寄生的電晶體開始導通
2. 其中一個電晶體的集電極電流變成另一個電晶體的基極電流
3. 形成正回授，造成電流持續增加
4. 就算觸發源消失了，電流還是會一直流

### 4. 可能造成的問題
- 產生大電流，燒壞 IC
- 電路功能異常
- 元件永久損壞
- 使用壽命變短

## 示意圖說明

### CMOS Latch-Up 結構與電路圖
![CMOS Latch-up 結構與電路圖](/Ian_blog/posts/layout_guides/LatchUp_Explanation/latchup_pic1.png)

上面這張圖說明了 CMOS 裡的 Latch-Up 現象，左邊是剖面圖，右邊是電路圖：

### 1. 剖面圖（左邊）
- **元件結構**：
  - 最上面的 P+ 區：接到 VDD，是 PMOS 的源極
  - N-well：PMOS 所在的 N 型井區
  - P-substrate：整個晶片的基底
  - N+ 區：接到 VSS，是 NMOS 的源極

- **寄生電晶體**：
  - Q1 (PNP)：P+ 區、N-well 和 P-substrate 形成的寄生電晶體
  - Q2 (NPN)：N-well、P-substrate 和 N+ 區形成的寄生電晶體
  - 這兩個電晶體共用了 N-well 和 P-substrate

- **寄生電阻**：
  - Rw：N-well 裡的橫向電阻
  - Rs：P-substrate 裡的橫向電阻

### 2. 電路圖（右邊）
- **電路架構**：
  - Q1 和 Q2 形成一組互補的電晶體
  - Q1 的集電極接到 Q2 的基極
  - Q2 的集電極接到 Q1 的基極
  - 這樣就形成了一個正回授的迴路

### 3. 觸發的過程
1. **一開始的觸發**：
   - 當有外來的干擾（像是過壓或雜訊）讓其中一個電晶體開始導通
   - 比方說：P+ 區的電位升高，Q1 開始導通

2. **正回授的形成**：
   - Q1 導通後，電流流過 Rs
   - Rs 上的電壓讓 Q2 的基極有偏壓
   - Q2 開始導通，電流流過 Rw
   - Rw 上的電壓又讓 Q1 導通得更多
   - 這樣就形成了一個自我維持的迴路

3. **鎖住效應**：
   - 一旦迴路形成，兩個電晶體就會一直維持在導通狀態
   - 就算原本的觸發源不見了，電流還是會一直流
   - 要停止這個現象只能把電源關掉

### 4. 預防方式
- **減少寄生電阻**：
  - 多放一些 N-well 和 Substrate 的接點
  - 讓電流路徑變短
  
- **抑制寄生電晶體**：
  - 用 Guard Ring 把電流路徑切斷
  - 元件之間要保持適當距離

- **電路保護**：
  - 加上箝制二極體
  - 注意電源開關的順序

## 預防措施

1. **版圖設計層面**
   - 使用保護環（Guard Ring）
   - 適當的基板接觸（Substrate Contacts）
   - 維持適當的元件間距

2. **電路設計層面**
   - 加入 ESD 保護電路
   - 電源排序控制
   - 電壓箝制電路

3. **操作預防**
   - 遵守元件規格書的操作條件
   - 正確的電源排序
   - 適當的 ESD 防護措施

## 檢測與測試

1. **I-Test**：測試元件在不同操作條件下的電流消耗
2. **Voltage Stress Test**：施加電壓壓力測試
3. **Temperature Cycling**：溫度循環測試
4. **ESD 測試**：評估靜電防護能力

## 總結

Latch-Up 是 CMOS 技術中一個重要的可靠性議題，需要在設計階段就充分考慮預防措施。通過適當的版圖設計、電路保護和操作規範，可以大幅降低 Latch-Up 的風險。了解其原理和預防方法對於確保 IC 產品的可靠性至關重要。

## Latch-Up 簡單說明

Latch-Up 是一種可能發生在電子元件中的問題，特別是在使用 CMOS 技術的積體電路（IC）中。這種現象會導致電路中出現不正常的高電流，可能會損壞電子元件。

### 為什麼會發生？

1. **寄生結構**：在 CMOS 電路中，內部有一些不想要的結構，這些結構就像是電子元件中的小陷阱。
2. **觸發條件**：當電路受到過高的電壓、靜電放電（像是你在地毯上摩擦後觸碰金屬時的靜電）或輻射時，這些小陷阱可能會被激活。
3. **後果**：一旦激活，這些陷阱會讓電流不受控制地流動，可能會讓電路過熱或損壞。

### 如何預防？

- **設計技巧**：在設計電路時，可以使用一些特殊的技術來避免這些陷阱被激活。
- **保護措施**：使用保護環和靜電放電保護裝置來減少觸發的機會。 